#ifndef _FAL_CFG_H_
#define _FAL_CFG_H_

#include <rtconfig.h>
#include <board.h>

#define ONCHIP_FLASH_DEV_NAME                       "{{ onchip_device_macro }}"
#define NOR_FLASH_DEV_NAME                          "{{ nor_device_macro }}"

{% for part in onchip_partitions %}
#define FAL_ONCHIP_START_ADDR_{{ '{:<12}'.format(part.name) }}          {{ part.start_addr }}
#define FAL_ONCHIP_MAX_LEN_{{ '{:<12}'.format(part.name) }}             ({{ part.size_kb | int }}*1024)
{% endfor %}

{% for part in nor_partitions %}
#define FAL_NORFLASH_START_ADDR_{{ '{:<12}'.format(part.name) }}        {{ part.start_addr }}
#define FAL_NORFLASH_MAX_LEN_{{ '{:<12}'.format(part.name) }}           ({{ part.size_kb | int }}*1024)
{% endfor %}

/* ===================== Flash device Configuration ========================= */

extern const struct fal_flash_dev onchip_flash;
extern struct fal_flash_dev nor_flash0;

/* flash device table */
#define FAL_FLASH_DEV_TABLE                                          \
{                                                                    \
    &onchip_flash,                                                   \
    &nor_flash0,                                                     \
}

/* ====================== Partition Configuration ========================== */
#ifdef FAL_PART_HAS_TABLE_CFG
/* partition table */
#define FAL_PART_TABLE                                                               \
{                                                                                      \
{% for part in onchip_partitions %}
    {FAL_PART_MAGIC_WORD,   "{{ part.name | rjust(10) | replace(' ', '') }}",   ONCHIP_FLASH_DEV_NAME,  {{ part.start_addr | string | rjust(8) }}, {{ part.size_bytes | int | rjust(10) }}, 0}, \
{% endfor %}
{% for part in onchip_partitions %}
    {FAL_PART_MAGIC_WORD,   "{{ part.name | rjust(10) | replace(' ', '')  }}",   NOR_FLASH_DEV_NAME,     {{ part.start_addr | string | rjust(8) }}, {{ part.size_bytes | int | rjust(10) }}, 0}, \
{% endfor %}
}
#endif /* FAL_PART_HAS_TABLE_CFG */

#endif /* _FAL_CFG_H_ */
 